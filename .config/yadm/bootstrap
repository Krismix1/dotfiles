#!/bin/sh

# ====================================
# Install packages
# ====================================

sudo pacman -S --noconfirm --needed \
                alacritty \
                base-devel \
                chromium \
                curl \
                dunst \
                feh \
                firefox-developer-edition \
                htop \
                i3-gaps \
                libreoffice \
                libnotify \
                neovim \
                nm-connection-editor \
                openssh \
                pulseaudio-alsa \
                pulsemixer \
                python3 \
                ripgrep \
                rofi \
                slock \
                tmux \
                tmuxinator \
                udisks2 \
                unclutter \
                unzip \
                wget \
                xclip \
                xorg-server \
                xorg-xinit \
                xorg-xrandr \
                xorg-xset \
                zatura \
                zathura-pdf-mupdf \
                zip \
                zsh

if pacman -Qs yay > /dev/null ; then
    echo "Yay is already installed, moving on..."
else
    pushd /tmp
    rm -rf yay
    git clone https://aur.archlinux.org/yay.git
    pushd yay
    makepkg -si --noconfirm
    popd
    rm -rf yay
    popd
fi

# TODO: Import keys for Spotify
yay -S --needed --removemake --nocleanmenu --nodiffmenu --noeditmenu --noconfirm \
                lazygit \
                nerd-fonts-iosevka \
                nvm \
                polybar \
                spicetify-cli \
                spotify


# ====================================
# Polybar font
# ====================================

mkdir -p ~/.local/share/fonts
curl https://raw.githubusercontent.com/adi1090x/polybar-themes/master/polybar-8/fonts/icomoon-feather.ttf > ~/.local/share/fonts/icomoon-feather.ttf
fc-cache -vf ~/.local/share/fonts/

# Make pacman and yay colorful and adds eye candy on the progress bar because why not.
grep -q "^Color" /etc/pacman.conf || sudo sed -i "s/^#Color$/Color/" /etc/pacman.conf
grep -q "ILoveCandy" /etc/pacman.conf || sudo sed -i "/#VerbosePkgLists/a ILoveCandy" /etc/pacman.conf

echo "=============="
echo "==== DONE ===="
echo "=============="
echo "$ chsh -s /bin/zsh"
echo "$ startx"
echo "$ feh --bg-fill ~/.config/wallpaper.png"
