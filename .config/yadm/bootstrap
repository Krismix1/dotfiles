#!/bin/sh

# ====================================
# Install packages
# ====================================

sudo pacman -S --noconfirm --needed \
                alacritty \
                curl \
                dunst \
                firefox-developer-edition \
                git \
                i3-gaps \
                neovim \
                openssh \
                python3 \
                ripgrep \
                rofi \
                udisks2 \
                xorg-server \
                xorg-xinit \
                zsh

if pacman -Qs yay > /dev/null ; then
    echo "Yay is already installed, moving on..."
else
    pushd /tmp
    rm -rf yay
    git clone https://aur.archlinux.org/yay.git
    pushd yay
    makepkg -si --noconfirm
    popd
    rm -rf yay
    popd
fi

yay -S --needed --removemake --nocleanmenu --nodiffmenu --noeditmenu --noconfirm \
                nerd-fonts-iosevka \
                polybar \
                spicetify-cli \
                spotify


# ====================================
# Polybar font
# ====================================

mkdir -p ~/.local/share/fonts
curl https://raw.githubusercontent.com/adi1090x/polybar-themes/master/polybar-8/fonts/icomoon-feather.ttf > ~/.local/share/fonts/icomoon-feather.ttf
fc-cache -vf ~/.local/share/fonts/

# Make pacman display colored output
sudo sed -i 's/#Color/Color\nILoveCandy/g' /etc/pacman.conf

echo "=============="
echo "==== DONE ===="
echo "=============="
echo "$ chsh -s /bin/zsh"
echo "$ startx"
echo "$ feh --bg-fill ~/.config/wallpaper.png"
